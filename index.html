<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="Generator" content="EditPlus®">
  <meta name="Author" content="">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
  <title>3D拖拽特效</title>
  <style>
	*{margin:0;padding:0;}
	body,html{width:100%;height:100%;overflow:hidden;}
	body{background:#111;}
	#container{perspective:800px;}
	#box{width:120px;height:180px;
	position:relative;margin:130px auto;
	transform-style:preserve-3d;transform:rotateX(-27deg) rotateY(0deg);}
	#box > img{
		width:100%;height:100%;position:absolute;
		border-radius:1px;
		box-shadow:0 0 8px #f9f;
		/*倒影：朝向 偏移 遮盖*//*线性渐变(从哪里开始,开始时候的颜色,结束时候的颜色)*/
		-webkit-box-reflect:below 5px linear-gradient(top,rgba(0,0,0,0) 40%,rgba(0,0,0,0.5) 100%);
	}
	#box > p {
		width:1200px;
		height:1200px;
		background:-webkit-radial-gradient(center center,600px 600px,rgba(244,23,234,0.2),rgba(0,0,0,0));
		border-radius:100%;
		position:absolute;
		left:50%;
		top:102%;
		margin-left:-600px;
		margin-top:-600px;
		transform:rotateX(90deg);
	}
  </style>
 </head>
 <body>
  
	<div id="container">
		<div id="box">
			<img src="img/1.jpg">
			<img src="img/2.jpg">
			<img src="img/3.jpg">
			<img src="img/4.jpg">
			<img src="img/5.jpg">
			<img src="img/6.jpg">
			<img src="img/7.jpg">
			<img src="img/8.jpg">
			<img src="img/9.jpg">
			<img src="img/10.jpg">
			<img src="img/11.jpg">
			<p></p>
		</div>
	</div>
	<script>
		onload = () => {
			let box = document.getElementById("box"),
				imgs = box.children,
				degY = 360 / (imgs.length - 1),
				speed = 1;
			for(let i=0,len=imgs.length;i<len - 1;i++){
				let img = imgs[i];
				img.style.transform = "rotateY("+(degY * i)+"deg) translateZ(350px)";
				img.style.transition = "transform 1s " + (imgs.length - 2 - i) * 0.1 + "s";
			};
			mTop();
			window.onresize = mTop;
			// 居中相册
			function mTop(){
				// 可视区域高度
				let wH = document.documentElement.clientHeight;
				box.style.marginTop = wH / 2 - 180 + 'px';
			};
			var roX=-27,roY=0;
			var timer;
			document.onmousedown = function(e){
				e = e || window.event;
				let prevX = e.clientX;
				let prevY = e.clientY;
				let currentX,currentY,minusX,minusY;
				clearInterval(timer);
				this.onmousemove = function(e){
					e = e || window.event;
					currentX = e.pageX;
					currentY = e.pageY;
					minusX = currentX - prevX;
					minusY = currentY - prevY;
					roY += minusX * 0.2;
					roX -= minusY * 0.1;
					box.style.transform = "rotateX("+roX+"deg) rotateY("+roY+"deg)";
					prevX = currentX;
					prevY = currentY;
					this.onmouseup = function(){
						document.onmousemove = null;
						// 缓冲动画
						timer = setInterval(function(){
							minusX *= 0.95;
							minusY *= 0.95;
							roY += minusX*0.2; 
							roX -= minusY*0.1;
							box.style.transform = 'rotateX('+ roX +'deg) rotateY('+ roY +'deg)';
							if ( Math.abs(minusX)<0.1 && Math.abs( minusY )<0.1 )
								clearInterval( timer );
						},13);
					};
				};
				return false;
			};
		};
	</script>
 </body>
</html>
